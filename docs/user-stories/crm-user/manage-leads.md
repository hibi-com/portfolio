---
title: リード管理
description: CRMユーザーによるリード（見込み客）の管理
---

## ストーリー

**As a** CRM User（CRMユーザー）
**I want to** リード（見込み客）を管理したい
**So that** 見込み客を効果的に顧客に変換できる

## ペルソナ

| 属性 | 値 |
| ---- | -- |
| 名前 | CRM User |
| 役割 | crm-user |
| 技術レベル | 中級者 |
| 主な目的 | リード管理と変換 |

## 前提条件

- CRMユーザーとしてログイン済み
- CRM機能へのアクセス権限がある

## 受け入れ条件（Acceptance Criteria）

### AC1: リード一覧の表示

**Given** CRMユーザーがログインしている
**When** リード管理ページにアクセスする
**Then** すべてのリードが一覧表示される

### AC2: リードの検索とフィルタリング

**Given** リード一覧ページにいる
**When** 検索キーワードを入力する、またはステータスでフィルターする
**Then** 条件に一致するリードのみが表示される

### AC3: 新規リードの作成

**Given** リード一覧ページにいる
**When** 「新規作成」ボタンをクリックし、リード情報を入力して保存する
**Then** 新しいリードが作成される

### AC4: リードの編集

**Given** リード詳細ページにいる
**When** リード情報を編集して保存する
**Then** リード情報が更新される

### AC5: リードから顧客への変換

**Given** リード詳細ページにいる
**When** 「顧客に変換」ボタンをクリックし、確認する
**Then** リードが顧客に変換され、顧客詳細ページに遷移する

### AC6: リードの削除

**Given** リード詳細ページにいる
**When** 「削除」ボタンをクリックし、確認する
**Then** リードが削除される

## シナリオ

### 正常系シナリオ（リード変換）

1. CRMユーザーは管理画面にログインする
2. サイドバーから「リード」をクリックする
3. リード一覧が表示される
4. 変換したいリードをクリックする
5. リード詳細ページで「顧客に変換」をクリックする
6. 確認ダイアログで「変換」をクリックする
7. 顧客が作成され、顧客詳細ページに遷移する

### リードステータスフロー

```text
New → Contacted → Qualified → Converted
       ↓           ↓
    Lost        Lost
```

## UI/UX要件

### 画面構成

```text
┌─────────────────────────────────────────────┐
│ Header (Navigation)                          │
├──────────┬──────────────────────────────────┤
│          │ リード管理                        │
│ Sidebar  │ [検索] [ステータス▼] [新規作成]  │
│          ├──────────────────────────────────┤
│          │ ┌──────────────────────────────┐ │
│          │ │ 名前 │ 会社 │ ステータス │日付│ │
│          │ ├──────────────────────────────┤ │
│          │ │ 山田 │ C社  │ New      │1/1 │ │
│          │ │ 佐藤 │ D社  │ Qualified│1/2 │ │
│          │ └──────────────────────────────┘ │
└──────────┴───────────────────────────────────┘
```

### 必要な要素

| 要素 | 種類 | 説明 |
| ---- | ---- | ---- |
| 検索バー | input | キーワード検索 |
| ステータスフィルター | dropdown | ステータスでフィルタリング |
| リードテーブル | table | リード一覧を表示 |
| 変換ボタン | button | 顧客に変換 |
| ステータスバッジ | badge | 現在のステータスを表示 |

## テスト

### E2Eテスト

- ファイル: `apps/admin/e2e/manage-leads.spec.ts`
- 対応するAC: AC1, AC2, AC3, AC4, AC5, AC6

### テストシナリオ

| シナリオ | AC | 自動化 |
| -------- | -- | ------ |
| 一覧表示 | AC1 | Yes |
| 検索・フィルター | AC2 | Yes |
| 新規作成 | AC3 | Yes |
| 編集 | AC4 | Yes |
| 顧客変換 | AC5 | Yes |
| 削除 | AC6 | Yes |

## 関連

- シーケンス図: `docs/sequence/api/crm/lead-*.md`
- API仕様: `docs/specs/api/crm.md`
- 画面: `apps/admin/app/routes/crm/leads/`
