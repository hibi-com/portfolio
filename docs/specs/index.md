# 仕様書 (Specifications)

このディレクトリには、プロジェクトの各コンポーネントの仕様を定義したドキュメントを格納します。

## 仕様駆動開発

本プロジェクトでは**仕様駆動開発 (Specification-Driven Development)** を採用しています。

```text
仕様定義 → 実装 → テスト → ドキュメント生成
   ↑         ↑       ↑         ↑
   手動    コード   自動     自動（一部）
```

## ディレクトリ構成

```text
specs/
├── api/              # API仕様（エンドポイント、レスポンス）
├── db/               # データベース仕様（テーブル、リレーション）
├── admin/            # 管理画面仕様
├── web/              # 公開サイト仕様
├── infra/            # インフラ仕様（要件、構成）
├── error-codes.md    # エラーコード定義
└── validation.md     # バリデーション仕様
```

## 各ディレクトリの役割

### API仕様 (`api/`)

REST APIのエンドポイント、リクエスト/レスポンス形式を定義。

- **ファイル**: `api/<domain>.md`
- **参照**: [API仕様](./api/)

### データベース仕様 (`db/`)

テーブル構造、リレーション、制約を定義。

- **ファイル**: `db/schema.md`
- **参照**: [DB仕様](./db/)

### インフラ仕様 (`infra/`)

インフラの要件、非機能要件、制約事項を定義。

- **ファイル**: `infra/overview.md`
- **参照**: [インフラ仕様](./infra/)
- **実装**: `infra/` (Pulumi)
- **構成図**: `docs/architecture/infra-architecture.md` (将来自動生成予定)

### フロントエンド仕様

- **Admin** (`admin/`): 管理画面の画面仕様
- **Web** (`web/`): 公開サイトの画面仕様

### 共通仕様

- **エラーコード** (`error-codes.md`): エラーコード一覧
- **バリデーション** (`validation.md`): バリデーションルール

## 仕様とドキュメントの違い

| 種類 | 目的 | タイミング | 管理方法 |
| ---- | ---- | ---------- | -------- |
| **仕様** (specs/) | 要件を定義 | 実装前 | 手動 |
| **シーケンス図** (sequence/) | フローを可視化 | 実装後 | 半自動 |
| **アーキテクチャ図** (architecture/) | 構成を図示 | 実装後 | 自動（将来） |

## 仕様書の書き方

### テンプレート参照

仕様書を作成する際は、必ず該当テンプレートを参照：

| 仕様書 | テンプレート |
| ------ | ------------ |
| API仕様 | `.claude/templates/sdd/api-spec.md` |
| DB仕様 | `.claude/templates/sdd/db-spec.md` |

### 必須項目

1. **概要**: 何を定義するか
2. **要件**: 満たすべき要件
3. **制約**: 技術的制約、ビジネス制約
4. **設計判断**: なぜこの設計にしたか

## 関連ドキュメント

- [仕様駆動開発ルール](../../.claude/rules/spec-driven.md)
- [テンプレート一覧](../../.claude/templates/)
- [モノレポ管理](../development/monorepo-management.md)
- [CI/CDツール](../development/ci-cd-tools.md)
