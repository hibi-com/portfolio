---
title: "コンポーネントパターン"
---

フロントエンドのコンポーネントは次のルールを守る。  
実装例はリポジトリの `shared/ui`・`features`・`widgets` を参照すること。

## レイヤーと責務

- **Shared UI（shared/ui）**: 汎用・再利用可能な UI のみ。ビジネスロジックを含めない。
- **Features（features）**: ユーザー視点の機能単位。特定ユースケースに特化し、ビジネスロジックを持ってよい。
- **Widgets（widgets）**: 複数の features/entities を組み合わせた大きなブロック。自己完結した UI セクションとする。

## 実装ルール

### コンポーネント

- 関数コンポーネントのみ使用する。クラスコンポーネントは禁止する。
- Props は分割代入で受け取り、デフォルト値は必要な場合に設定する。
- 条件で描画を分ける場合は早期 return を優先する。三項演算子はシンプルな場合のみ使う。

### クラス名・スタイル

- 条件付きクラス名は `classnames`（またはプロジェクトで採用したユーティリティ）でまとめる。文字列連結で長く書かない。

### 画像

- 画像には必ず `alt` を付ける。装飾の場合は空文字列とする。
- `loading="lazy"` を付けて遅延読み込みとする。サイズは `width` / `height` で指定し、レイアウトシフトを防ぐ。

### リンク・ナビゲーション

- ルート間のリンクは Remix の `Link` を使う。`prefetch="intent"` でホバー時にプリフェッチする。

### フック

- 再利用するロジックはカスタムフックに切り出す。フックは `use` プレフィックスとし、`shared/hooks` 等の配置ルールに従う。
- Remix の `useLoaderData`・`useFetcher`・`useNavigation`・`useLocation` は公式の用途に従って使う。

### エクスポート

- コンポーネントは名前付きエクスポートとする。デフォルトエクスポートは必要な場合のみ。公開は `index.ts` の再エクスポートで行う。

### パフォーマンス

- Props が変わらない限り再レンダーを防ぎたいコンポーネントには `React.memo` を検討する。乱用しない。
- コストの高い計算や子に渡すコールバックは `useMemo`・`useCallback` でメモ化する。依存配列は正確に指定する。

## 禁止事項

- クラスコンポーネントの新規作成をしない。
- 画像の `alt` を省略しない。
- ルート間リンクを `<a>` で直書きしない（`Link` を使う）。
- ビジネスロジックを shared/ui に書かない。
