# ユーザーストーリーテンプレート

## IMPORTANT: このテンプレートに従って一貫した形式でユーザーストーリーを作成すること

## ファイル配置規則

```text
docs/user-stories/
├── visitor/       # 一般訪問者
├── admin/         # 管理者
└── crm-user/      # CRMユーザー
```

## 命名規則

| 要素 | 規則 | 例 |
| ---- | ---- | -- |
| ファイル名 | ケバブケース、動詞-名詞 | `browse-blog.md`, `manage-posts.md` |

## テンプレート本体

```markdown
# {Story Title}

## ストーリー

**As a** {persona}（{ペルソナの日本語説明}）
**I want to** {goal}（{目標の日本語説明}）
**So that** {benefit}（{利益の日本語説明}）

## ペルソナ

| 属性 | 値 |
| ---- | -- |
| 名前 | {Persona Name} |
| 役割 | {visitor / admin / crm-user} |
| 技術レベル | {初心者 / 中級者 / 上級者} |
| 主な目的 | {目的} |

## 前提条件

- {precondition1}
- {precondition2}

## 受け入れ条件（Acceptance Criteria）

### AC1: {条件タイトル}

**Given** {前提状態}
**When** {ユーザーのアクション}
**Then** {期待される結果}

### AC2: {条件タイトル}

**Given** {前提状態}
**When** {ユーザーのアクション}
**Then** {期待される結果}

### AC3: {エラーケース}

**Given** {前提状態}
**When** {ユーザーのアクション}
**Then** {エラー時の期待される結果}

## シナリオ

### 正常系シナリオ

1. ユーザーは{ページ/画面}にアクセスする
2. ユーザーは{アクション}を行う
3. システムは{処理}を実行する
4. ユーザーは{結果}を確認する

### 代替シナリオ

1. {代替フローの手順}

### 異常系シナリオ

1. {エラーフローの手順}

## UI/UX要件

### 画面構成

\`\`\`
┌─────────────────────────────────────┐
│ Header                              │
├─────────────────────────────────────┤
│                                     │
│  {画面レイアウトの概略}              │
│                                     │
├─────────────────────────────────────┤
│ Footer                              │
└─────────────────────────────────────┘
\`\`\`

### 必要な要素

| 要素 | 種類 | 説明 |
| ---- | ---- | ---- |
| {element} | {button/input/list/etc} | {説明} |

### インタラクション

| アクション | 結果 |
| ---------- | ---- |
| {action} | {result} |

## 非機能要件

### パフォーマンス

| 項目 | 基準 |
| ---- | ---- |
| ページ読み込み | < 3秒 |
| API応答 | < 500ms |

### アクセシビリティ

- キーボード操作対応
- スクリーンリーダー対応
- カラーコントラスト基準準拠

## テスト

### E2Eテスト

- ファイル: `apps/{app}/e2e/large/{persona}/{story}.large.spec.ts`
- 対応するAC: AC1, AC2, AC3

### テストシナリオ

| シナリオ | AC | 自動化 |
| -------- | -- | ------ |
| {scenario1} | AC1 | Yes |
| {scenario2} | AC2 | Yes |
| {error-scenario} | AC3 | Yes |

## 関連

- シーケンス図: `docs/sequence/{layer}/{feature}/`
- API仕様: `docs/specs/api/{domain}.md`
- 画面: `apps/{app}/app/routes/{path}.tsx`
```

## 作成手順チェックリスト

1. [ ] ストーリーが「As a / I want to / So that」形式
2. [ ] ペルソナが明確に定義されている
3. [ ] 受け入れ条件がGiven/When/Then形式
4. [ ] 正常系・異常系シナリオがある
5. [ ] UI/UX要件が記述されている
6. [ ] 非機能要件が定義されている
7. [ ] E2Eテストへのリンクがある
8. [ ] 関連ドキュメントへのリンクがある
