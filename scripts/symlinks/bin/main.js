#!/usr/bin/env bun
// @bun
var X=Object.create;var{getPrototypeOf:Z,defineProperty:E,getOwnPropertyNames:tt}=Object;var et=Object.prototype.hasOwnProperty;var _=(e,t,s)=>{s=e!=null?X(Z(e)):{};let n=t||!e||!e.__esModule?E(s,"default",{value:e,enumerable:!0}):s;for(let i of tt(e))if(!et.call(n,i))E(n,i,{get:()=>e[i],enumerable:!0});return n};var st=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var P=st((Lt,B)=>{var S=process||{},G=S.argv||[],O=S.env||{},gt=!(!!O.NO_COLOR||G.includes("--no-color"))&&(!!O.FORCE_COLOR||G.includes("--color")||S.platform==="win32"||(S.stdout||{}).isTTY&&O.TERM!=="dumb"||!!O.CI),dt=(e,t,s=e)=>(n)=>{let i=""+n,o=i.indexOf(t,e.length);return~o?e+pt(i,t,s,o)+t:e+i+t},pt=(e,t,s,n)=>{let i="",o=0;do i+=e.substring(o,n)+s,o=n+t.length,n=e.indexOf(t,o);while(~n);return i+e.substring(o)},W=(e=gt)=>{let t=e?dt:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m"),blackBright:t("\x1B[90m","\x1B[39m"),redBright:t("\x1B[91m","\x1B[39m"),greenBright:t("\x1B[92m","\x1B[39m"),yellowBright:t("\x1B[93m","\x1B[39m"),blueBright:t("\x1B[94m","\x1B[39m"),magentaBright:t("\x1B[95m","\x1B[39m"),cyanBright:t("\x1B[96m","\x1B[39m"),whiteBright:t("\x1B[97m","\x1B[39m"),bgBlackBright:t("\x1B[100m","\x1B[49m"),bgRedBright:t("\x1B[101m","\x1B[49m"),bgGreenBright:t("\x1B[102m","\x1B[49m"),bgYellowBright:t("\x1B[103m","\x1B[49m"),bgBlueBright:t("\x1B[104m","\x1B[49m"),bgMagentaBright:t("\x1B[105m","\x1B[49m"),bgCyanBright:t("\x1B[106m","\x1B[49m"),bgWhiteBright:t("\x1B[107m","\x1B[49m")}};B.exports=W();B.exports.createColors=W});import{EventEmitter as nt}from"events";function T(e){return e==null?[]:Array.isArray(e)?e:[e]}function it(e,t,s,n){var i,o=e[t],c=~n.string.indexOf(t)?s==null||s===!0?"":String(s):typeof s==="boolean"?s:~n.boolean.indexOf(t)?s==="false"?!1:s==="true"||(e._.push((i=+s,i*0===0)?i:s),!!s):(i=+s,i*0===0)?i:s;e[t]=o==null?c:Array.isArray(o)?o.concat(c):[o,c]}function ot(e,t){e=e||[],t=t||{};var s,n,i,o,c,l={_:[]},r=0,a=0,u=0,h=e.length;let g=t.alias!==void 0,$=t.unknown!==void 0,R=t.default!==void 0;if(t.alias=t.alias||{},t.string=T(t.string),t.boolean=T(t.boolean),g)for(s in t.alias){n=t.alias[s]=T(t.alias[s]);for(r=0;r<n.length;r++)(t.alias[n[r]]=n.concat(s)).splice(r,1)}for(r=t.boolean.length;r-- >0;){n=t.alias[t.boolean[r]]||[];for(a=n.length;a-- >0;)t.boolean.push(n[a])}for(r=t.string.length;r-- >0;){n=t.alias[t.string[r]]||[];for(a=n.length;a-- >0;)t.string.push(n[a])}if(R){for(s in t.default)if(o=typeof t.default[s],n=t.alias[s]=t.alias[s]||[],t[o]!==void 0){t[o].push(s);for(r=0;r<n.length;r++)t[o].push(n[r])}}let N=$?Object.keys(t.alias):[];for(r=0;r<h;r++){if(i=e[r],i==="--"){l._=l._.concat(e.slice(++r));break}for(a=0;a<i.length;a++)if(i.charCodeAt(a)!==45)break;if(a===0)l._.push(i);else if(i.substring(a,a+3)==="no-"){if(o=i.substring(a+3),$&&!~N.indexOf(o))return t.unknown(i);l[o]=!1}else{for(u=a+1;u<i.length;u++)if(i.charCodeAt(u)===61)break;o=i.substring(a,u),c=i.substring(++u)||(r+1===h||(""+e[r+1]).charCodeAt(0)===45||e[++r]),n=a===2?[o]:o;for(u=0;u<n.length;u++){if(o=n[u],$&&!~N.indexOf(o))return t.unknown("-".repeat(a)+o);it(l,o,u+1<n.length||c,t)}}}if(R){for(s in t.default)if(l[s]===void 0)l[s]=t.default[s]}if(g)for(s in l){n=t.alias[s]||[];while(n.length>0)l[n.shift()]=l[s]}return l}var F=(e)=>e.replace(/[<[].+/,"").trim(),rt=(e)=>{let t=/<([^>]+)>/g,s=/\[([^\]]+)\]/g,n=[],i=(l)=>{let r=!1,a=l[1];if(a.startsWith("..."))a=a.slice(3),r=!0;return{required:l[0].startsWith("<"),value:a,variadic:r}},o;while(o=t.exec(e))n.push(i(o));let c;while(c=s.exec(e))n.push(i(c));return n},at=(e)=>{let t={alias:{},boolean:[]};for(let[s,n]of e.entries()){if(n.names.length>1)t.alias[n.names[0]]=n.names.slice(1);if(n.isBoolean)if(n.negated){if(!e.some((o,c)=>{return c!==s&&o.names.some((l)=>n.names.includes(l))&&typeof o.required==="boolean"}))t.boolean.push(n.names[0])}else t.boolean.push(n.names[0])}return t},I=(e)=>{return e.sort((t,s)=>{return t.length>s.length?-1:1})[0]},M=(e,t)=>{return e.length>=t?e:`${e}${" ".repeat(t-e.length)}`},ct=(e)=>{return e.replace(/([a-z])-([a-z])/g,(t,s,n)=>{return s+n.toUpperCase()})},lt=(e,t,s)=>{let n=0,i=t.length,o=e,c;for(;n<i;++n)c=o[t[n]],o=o[t[n]]=n===i-1?s:c!=null?c:!!~t[n+1].indexOf(".")||!(+t[n+1]>-1)?{}:[]},mt=(e,t)=>{for(let s of Object.keys(t)){let n=t[s];if(n.shouldTransform){if(e[s]=Array.prototype.concat.call([],e[s]),typeof n.transformFunction==="function")e[s]=e[s].map(n.transformFunction)}}},ht=(e)=>{let t=/([^\\\/]+)$/.exec(e);return t?t[1]:""},V=(e)=>{return e.split(".").map((t,s)=>{return s===0?ct(t):t}).join(".")};class w extends Error{constructor(e){super(e);if(this.name=this.constructor.name,typeof Error.captureStackTrace==="function")Error.captureStackTrace(this,this.constructor);else this.stack=new Error(e).stack}}class D{constructor(e,t,s){if(this.rawName=e,this.description=t,this.config=Object.assign({},s),e=e.replace(/\.\*/g,""),this.negated=!1,this.names=F(e).split(",").map((n)=>{let i=n.trim().replace(/^-{1,2}/,"");if(i.startsWith("no-"))this.negated=!0,i=i.replace(/^no-/,"");return V(i)}).sort((n,i)=>n.length>i.length?1:-1),this.name=this.names[this.names.length-1],this.negated&&this.config.default==null)this.config.default=!0;if(e.includes("<"))this.required=!0;else if(e.includes("["))this.required=!1;else this.isBoolean=!0}}var ut=process.argv,ft=`${process.platform}-${process.arch} node-${process.version}`;class A{constructor(e,t,s={},n){this.rawName=e,this.description=t,this.config=s,this.cli=n,this.options=[],this.aliasNames=[],this.name=F(e),this.args=rt(e),this.examples=[]}usage(e){return this.usageText=e,this}allowUnknownOptions(){return this.config.allowUnknownOptions=!0,this}ignoreOptionDefaultValue(){return this.config.ignoreOptionDefaultValue=!0,this}version(e,t="-v, --version"){return this.versionNumber=e,this.option(t,"Display version number"),this}example(e){return this.examples.push(e),this}option(e,t,s){let n=new D(e,t,s);return this.options.push(n),this}alias(e){return this.aliasNames.push(e),this}action(e){return this.commandAction=e,this}isMatched(e){return this.name===e||this.aliasNames.includes(e)}get isDefaultCommand(){return this.name===""||this.aliasNames.includes("!")}get isGlobalCommand(){return this instanceof j}hasOption(e){return e=e.split(".")[0],this.options.find((t)=>{return t.names.includes(e)})}outputHelp(){let{name:e,commands:t}=this.cli,{versionNumber:s,options:n,helpCallback:i}=this.cli.globalCommand,o=[{body:`${e}${s?`/${s}`:""}`}];if(o.push({title:"Usage",body:`  $ ${e} ${this.usageText||this.rawName}`}),(this.isGlobalCommand||this.isDefaultCommand)&&t.length>0){let r=I(t.map((a)=>a.rawName));o.push({title:"Commands",body:t.map((a)=>{return`  ${M(a.rawName,r.length)}  ${a.description}`}).join(`
`)}),o.push({title:"For more info, run any command with the `--help` flag",body:t.map((a)=>`  $ ${e}${a.name===""?"":` ${a.name}`} --help`).join(`
`)})}let l=this.isGlobalCommand?n:[...this.options,...n||[]];if(!this.isGlobalCommand&&!this.isDefaultCommand)l=l.filter((r)=>r.name!=="version");if(l.length>0){let r=I(l.map((a)=>a.rawName));o.push({title:"Options",body:l.map((a)=>{return`  ${M(a.rawName,r.length)}  ${a.description} ${a.config.default===void 0?"":`(default: ${a.config.default})`}`}).join(`
`)})}if(this.examples.length>0)o.push({title:"Examples",body:this.examples.map((r)=>{if(typeof r==="function")return r(e);return r}).join(`
`)});if(i)o=i(o)||o;console.log(o.map((r)=>{return r.title?`${r.title}:
${r.body}`:r.body}).join(`

`))}outputVersion(){let{name:e}=this.cli,{versionNumber:t}=this.cli.globalCommand;if(t)console.log(`${e}/${t} ${ft}`)}checkRequiredArgs(){let e=this.args.filter((t)=>t.required).length;if(this.cli.args.length<e)throw new w(`missing required args for command \`${this.rawName}\``)}checkUnknownOptions(){let{options:e,globalCommand:t}=this.cli;if(!this.config.allowUnknownOptions){for(let s of Object.keys(e))if(s!=="--"&&!this.hasOption(s)&&!t.hasOption(s))throw new w(`Unknown option \`${s.length>1?`--${s}`:`-${s}`}\``)}}checkOptionValue(){let{options:e,globalCommand:t}=this.cli,s=[...t.options,...this.options];for(let n of s){let i=e[n.name.split(".")[0]];if(n.required){let o=s.some((c)=>c.negated&&c.names.includes(n.name));if(i===!0||i===!1&&!o)throw new w(`option \`${n.rawName}\` value is missing`)}}}}class j extends A{constructor(e){super("@@global@@","",{},e)}}var C=Object.assign;class U extends nt{constructor(e=""){super();this.name=e,this.commands=[],this.rawArgs=[],this.args=[],this.options={},this.globalCommand=new j(this),this.globalCommand.usage("<command> [options]")}usage(e){return this.globalCommand.usage(e),this}command(e,t,s){let n=new A(e,t||"",s,this);return n.globalCommand=this.globalCommand,this.commands.push(n),n}option(e,t,s){return this.globalCommand.option(e,t,s),this}help(e){return this.globalCommand.option("-h, --help","Display this message"),this.globalCommand.helpCallback=e,this.showHelpOnExit=!0,this}version(e,t="-v, --version"){return this.globalCommand.version(e,t),this.showVersionOnExit=!0,this}example(e){return this.globalCommand.example(e),this}outputHelp(){if(this.matchedCommand)this.matchedCommand.outputHelp();else this.globalCommand.outputHelp()}outputVersion(){this.globalCommand.outputVersion()}setParsedInfo({args:e,options:t},s,n){if(this.args=e,this.options=t,s)this.matchedCommand=s;if(n)this.matchedCommandName=n;return this}unsetMatchedCommand(){this.matchedCommand=void 0,this.matchedCommandName=void 0}parse(e=ut,{run:t=!0}={}){if(this.rawArgs=e,!this.name)this.name=e[1]?ht(e[1]):"cli";let s=!0;for(let i of this.commands){let o=this.mri(e.slice(2),i),c=o.args[0];if(i.isMatched(c)){s=!1;let l=C(C({},o),{args:o.args.slice(1)});this.setParsedInfo(l,i,c),this.emit(`command:${c}`,i)}}if(s){for(let i of this.commands)if(i.name===""){s=!1;let o=this.mri(e.slice(2),i);this.setParsedInfo(o,i),this.emit("command:!",i)}}if(s){let i=this.mri(e.slice(2));this.setParsedInfo(i)}if(this.options.help&&this.showHelpOnExit)this.outputHelp(),t=!1,this.unsetMatchedCommand();if(this.options.version&&this.showVersionOnExit&&this.matchedCommandName==null)this.outputVersion(),t=!1,this.unsetMatchedCommand();let n={args:this.args,options:this.options};if(t)this.runMatchedCommand();if(!this.matchedCommand&&this.args[0])this.emit("command:*");return n}mri(e,t){let s=[...this.globalCommand.options,...t?t.options:[]],n=at(s),i=[],o=e.indexOf("--");if(o>-1)i=e.slice(o+1),e=e.slice(0,o);let c=ot(e,n);c=Object.keys(c).reduce((h,g)=>{return C(C({},h),{[V(g)]:c[g]})},{_:[]});let l=c._,r={"--":i},a=t&&t.config.ignoreOptionDefaultValue?t.config.ignoreOptionDefaultValue:this.globalCommand.config.ignoreOptionDefaultValue,u=Object.create(null);for(let h of s){if(!a&&h.config.default!==void 0)for(let g of h.names)r[g]=h.config.default;if(Array.isArray(h.config.type)){if(u[h.name]===void 0)u[h.name]=Object.create(null),u[h.name].shouldTransform=!0,u[h.name].transformFunction=h.config.type[0]}}for(let h of Object.keys(c))if(h!=="_"){let g=h.split(".");lt(r,g,c[h]),mt(r,u)}return{args:l,options:r}}runMatchedCommand(){let{args:e,options:t,matchedCommand:s}=this;if(!s||!s.commandAction)return;s.checkUnknownOptions(),s.checkOptionValue(),s.checkRequiredArgs();let n=[];return s.args.forEach((i,o)=>{if(i.variadic)n.push(e.slice(o));else n.push(e[o])}),n.push(t),s.commandAction.apply(this,n)}}var q=(e="")=>new U(e);var v=_(P(),1);var k=_(P(),1);import*as x from"fs";import*as Q from"path";import*as p from"path";var d={paths:{projectRoot:"../../..",claude:".claude",github:".github",codex:".codex"},targets:[{name:"copilot",displayName:"Copilot",icon:"\uD83D\uDCE6",tasks:[{type:"symlink",name:"copilot-instructions.md",description:"copilot-instructions.md",icon:"\uD83D\uDCDD",target:"../CLAUDE.md",location:"github"},{type:"fileLinks",name:"instructions",description:"instructions/",icon:"\uD83D\uDCC2",source:"claude/rules",target:"github/instructions",suffix:".instructions"},{type:"fileLinks",name:"agents",description:"agents/",icon:"\uD83E\uDD16",source:"claude/agents",target:"github/agents",suffix:".agent"},{type:"skillLinks",name:"skills",description:"skills/",icon:"\u26A1",source:"claude/skills",target:"github/skills",filename:"SKILL.md"}]},{name:"codex",displayName:"Codex",icon:"\uD83D\uDCE6",tasks:[{type:"fileLinks",name:"commands",description:"commands/",icon:"\uD83D\uDCC2",source:"claude/commands",target:"codex/commands",suffix:""},{type:"fileLinks",name:"rules",description:"rules/",icon:"\uD83D\uDCCB",source:"claude/rules",target:"codex/rules",suffix:""},{type:"fileLinks",name:"agents",description:"agents/",icon:"\uD83E\uDD16",source:"claude/agents",target:"codex/agents",suffix:""},{type:"skillLinks",name:"skills",description:"skills/",icon:"\u26A1",source:"claude/skills",target:"codex/skills",filename:"SKILL.md"}]}]};var __dirname="/Users/hibi-keita/Repository/github.com/ageha734/portfolio/scripts/symlinks/lib";function xt(){return{start:"\uD83D\uDD17 AI\u8A2D\u5B9A\u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF\u306E\u7D71\u4E00\u69CB\u7BC9\u3092\u958B\u59CB...",targetStart:"{icon} [{name}] \u8A2D\u5B9A\u3092\u69CB\u7BC9\u4E2D...",taskStart:"  {icon} {description}\u3092\u69CB\u7BC9\u4E2D...",summaryTitle:"\uD83D\uDCCA [{name}] \u4F5C\u6210\u3055\u308C\u305F\u30EA\u30F3\u30AF\uFF1A",summaryItem:"   {description} ({count}\u30D5\u30A1\u30A4\u30EB)",complete:"\u2705 \u5B8C\u4E86\uFF01"}}function H(){let e=p.resolve(__dirname,d.paths.projectRoot),t={projectRoot:e,claude:p.join(e,d.paths.claude),github:p.join(e,d.paths.github),codex:p.join(e,d.paths.codex)},s=xt();return{paths:d.paths,targets:d.targets,resolvedPaths:t,messages:s}}function b(e,t){let s=e.split("/"),n=s[0];if(!n)throw new Error("Empty path template");let i=t[n];if(!i)throw new Error(`Unknown path prefix: ${n}`);return p.join(i,...s.slice(1))}function y(e,t){return e.replaceAll(/\{(\w+)\}/g,(s,n)=>String(t[n]??""))}import*as m from"fs";import*as f from"path";async function K(e,t,s){if(m.existsSync(t)&&m.lstatSync(t).isSymbolicLink())m.unlinkSync(t);m.mkdirSync(t,{recursive:!0});let n=m.readdirSync(t).filter((o)=>o.endsWith(".md"));for(let o of n)m.unlinkSync(f.join(t,o));let i=m.readdirSync(e).filter((o)=>o.endsWith(".md")&&m.statSync(f.join(e,o)).isFile());for(let o of i){let c=f.basename(o,".md"),l=f.join(e,o),r=f.relative(t,l),a=f.join(t,`${c}${s}.md`);m.symlinkSync(r,a)}}async function Y(e,t,s){if(m.existsSync(t)&&m.lstatSync(t).isSymbolicLink())m.unlinkSync(t);m.mkdirSync(t,{recursive:!0});let n=m.readdirSync(t);for(let o of n){let c=f.join(t,o);if(m.lstatSync(c).isDirectory())m.rmSync(c,{recursive:!0,force:!0});else if(o.endsWith(".md"))m.unlinkSync(c)}let i=m.readdirSync(e).filter((o)=>m.statSync(f.join(e,o)).isDirectory());for(let o of i){let c=f.join(e,o,s);if(m.existsSync(c)){let l=f.join(t,o);m.mkdirSync(l,{recursive:!0});let r=f.relative(l,c),a=f.join(l,s);m.symlinkSync(r,a)}}}function z(e,t){if(!m.existsSync(e))return 0;let s=0,n=(i)=>{let o=m.readdirSync(i);for(let c of o){let l=f.join(i,c);if(m.lstatSync(l).isDirectory())n(l);else if(c.match(new RegExp(t.replaceAll("*",".*"))))s++}};return n(e),s}async function yt(e,t,s){switch(e.type){case"symlink":{let n=b(e.location||t,s),i=Q.join(n,e.name);if(x.existsSync(i))x.unlinkSync(i);x.symlinkSync(e.target,i);break}case"fileLinks":{let n=b(e.source,s),i=b(e.target,s);await K(n,i,e.suffix||"");break}case"skillLinks":{let n=b(e.source,s),i=b(e.target,s),o=e.filename||"SKILL.md";await Y(n,i,o);break}}}function kt(e,t,s){if(e.type==="symlink")return;let n=b(e.target,t),i;if(e.type==="skillLinks")i=e.filename||"SKILL.md";else if(e.suffix)i=`*${e.suffix}.md`;else i="*.md";let o=z(n,i);console.log(y(s,{description:e.description,count:o}))}async function Ct(e,t,s){console.log(k.default.blue(y(s.targetStart,{icon:e.icon,name:e.displayName})));for(let n of e.tasks)console.log(y(s.taskStart,{icon:n.icon,description:n.description})),await yt(n,e.name,t);console.log("")}function wt(e,t,s){console.log(k.default.green(y(s.summaryTitle,{name:e.displayName})));for(let n of e.tasks)kt(n,t,s.summaryItem);console.log("")}async function J(){let e=H(),{resolvedPaths:t,messages:s,targets:n}=e;console.log(k.default.cyan(s.start)),console.log("");for(let i of n)await Ct(i,t,s);for(let i of n)wt(i,t,s);console.log(k.default.green(s.complete))}var L=q("symlinks");L.command("[...args]","\u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF").action(async()=>{try{console.log(v.default.cyan(`\uD83D\uDD17 \u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF\u3092\u958B\u59CB...
`)),await J(),console.log(v.default.green(`
\u2705 \u5B8C\u4E86\uFF01`))}catch(e){console.error(v.default.red("\u274C \u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F:"),e),process.exit(1)}});L.help();L.version("1.0.0");L.parse();
