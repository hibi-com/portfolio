#!/usr/bin/env bun
// @bun
var P=Object.create;var{getPrototypeOf:nn,defineProperty:T,getOwnPropertyNames:tn}=Object;var on=Object.prototype.hasOwnProperty;var j=(i,n,t)=>{t=i!=null?P(nn(i)):{};let o=n||!i||!i.__esModule?T(t,"default",{value:i,enumerable:!0}):t;for(let e of tn(i))if(!on.call(o,e))T(o,e,{get:()=>i[e],enumerable:!0});return o};var en=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports);var R=en((Ln,I)=>{var A=process||{},J=A.argv||[],$=A.env||{},pn=!(!!$.NO_COLOR||J.includes("--no-color"))&&(!!$.FORCE_COLOR||J.includes("--color")||A.platform==="win32"||(A.stdout||{}).isTTY&&$.TERM!=="dumb"||!!$.CI),xn=(i,n,t=i)=>(o)=>{let e=""+o,s=e.indexOf(n,i.length);return~s?i+gn(e,n,t,s)+n:i+e+n},gn=(i,n,t,o)=>{let e="",s=0;do e+=i.substring(s,o)+t,s=o+n.length,o=i.indexOf(n,s);while(~o);return e+i.substring(s)},K=(i=pn)=>{let n=i?xn:()=>String;return{isColorSupported:i,reset:n("\x1B[0m","\x1B[0m"),bold:n("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:n("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:n("\x1B[3m","\x1B[23m"),underline:n("\x1B[4m","\x1B[24m"),inverse:n("\x1B[7m","\x1B[27m"),hidden:n("\x1B[8m","\x1B[28m"),strikethrough:n("\x1B[9m","\x1B[29m"),black:n("\x1B[30m","\x1B[39m"),red:n("\x1B[31m","\x1B[39m"),green:n("\x1B[32m","\x1B[39m"),yellow:n("\x1B[33m","\x1B[39m"),blue:n("\x1B[34m","\x1B[39m"),magenta:n("\x1B[35m","\x1B[39m"),cyan:n("\x1B[36m","\x1B[39m"),white:n("\x1B[37m","\x1B[39m"),gray:n("\x1B[90m","\x1B[39m"),bgBlack:n("\x1B[40m","\x1B[49m"),bgRed:n("\x1B[41m","\x1B[49m"),bgGreen:n("\x1B[42m","\x1B[49m"),bgYellow:n("\x1B[43m","\x1B[49m"),bgBlue:n("\x1B[44m","\x1B[49m"),bgMagenta:n("\x1B[45m","\x1B[49m"),bgCyan:n("\x1B[46m","\x1B[49m"),bgWhite:n("\x1B[47m","\x1B[49m"),blackBright:n("\x1B[90m","\x1B[39m"),redBright:n("\x1B[91m","\x1B[39m"),greenBright:n("\x1B[92m","\x1B[39m"),yellowBright:n("\x1B[93m","\x1B[39m"),blueBright:n("\x1B[94m","\x1B[39m"),magentaBright:n("\x1B[95m","\x1B[39m"),cyanBright:n("\x1B[96m","\x1B[39m"),whiteBright:n("\x1B[97m","\x1B[39m"),bgBlackBright:n("\x1B[100m","\x1B[49m"),bgRedBright:n("\x1B[101m","\x1B[49m"),bgGreenBright:n("\x1B[102m","\x1B[49m"),bgYellowBright:n("\x1B[103m","\x1B[49m"),bgBlueBright:n("\x1B[104m","\x1B[49m"),bgMagentaBright:n("\x1B[105m","\x1B[49m"),bgCyanBright:n("\x1B[106m","\x1B[49m"),bgWhiteBright:n("\x1B[107m","\x1B[49m")}};I.exports=K();I.exports.createColors=K});import{EventEmitter as sn}from"events";function N(i){return i==null?[]:Array.isArray(i)?i:[i]}function rn(i,n,t,o){var e,s=i[n],c=~o.string.indexOf(n)?t==null||t===!0?"":String(t):typeof t==="boolean"?t:~o.boolean.indexOf(n)?t==="false"?!1:t==="true"||(i._.push((e=+t,e*0===0)?e:t),!!t):(e=+t,e*0===0)?e:t;i[n]=s==null?c:Array.isArray(s)?s.concat(c):[s,c]}function mn(i,n){i=i||[],n=n||{};var t,o,e,s,c,l={_:[]},r=0,m=0,u=0,h=i.length;let b=n.alias!==void 0,_=n.unknown!==void 0,q=n.default!==void 0;if(n.alias=n.alias||{},n.string=N(n.string),n.boolean=N(n.boolean),b)for(t in n.alias){o=n.alias[t]=N(n.alias[t]);for(r=0;r<o.length;r++)(n.alias[o[r]]=o.concat(t)).splice(r,1)}for(r=n.boolean.length;r-- >0;){o=n.alias[n.boolean[r]]||[];for(m=o.length;m-- >0;)n.boolean.push(o[m])}for(r=n.string.length;r-- >0;){o=n.alias[n.string[r]]||[];for(m=o.length;m-- >0;)n.string.push(o[m])}if(q){for(t in n.default)if(s=typeof n.default[t],o=n.alias[t]=n.alias[t]||[],n[s]!==void 0){n[s].push(t);for(r=0;r<o.length;r++)n[s].push(o[r])}}let U=_?Object.keys(n.alias):[];for(r=0;r<h;r++){if(e=i[r],e==="--"){l._=l._.concat(i.slice(++r));break}for(m=0;m<e.length;m++)if(e.charCodeAt(m)!==45)break;if(m===0)l._.push(e);else if(e.substring(m,m+3)==="no-"){if(s=e.substring(m+3),_&&!~U.indexOf(s))return n.unknown(e);l[s]=!1}else{for(u=m+1;u<e.length;u++)if(e.charCodeAt(u)===61)break;s=e.substring(m,u),c=e.substring(++u)||(r+1===h||(""+i[r+1]).charCodeAt(0)===45||i[++r]),o=m===2?[s]:s;for(u=0;u<o.length;u++){if(s=o[u],_&&!~U.indexOf(s))return n.unknown("-".repeat(m)+s);rn(l,s,u+1<o.length||c,n)}}}if(q){for(t in n.default)if(l[t]===void 0)l[t]=n.default[t]}if(b)for(t in l){o=n.alias[t]||[];while(o.length>0)l[o.shift()]=l[t]}return l}var H=(i)=>i.replace(/[<[].+/,"").trim(),cn=(i)=>{let n=/<([^>]+)>/g,t=/\[([^\]]+)\]/g,o=[],e=(l)=>{let r=!1,m=l[1];if(m.startsWith("..."))m=m.slice(3),r=!0;return{required:l[0].startsWith("<"),value:m,variadic:r}},s;while(s=n.exec(i))o.push(e(s));let c;while(c=t.exec(i))o.push(e(c));return o},ln=(i)=>{let n={alias:{},boolean:[]};for(let[t,o]of i.entries()){if(o.names.length>1)n.alias[o.names[0]]=o.names.slice(1);if(o.isBoolean)if(o.negated){if(!i.some((s,c)=>{return c!==t&&s.names.some((l)=>o.names.includes(l))&&typeof s.required==="boolean"}))n.boolean.push(o.names[0])}else n.boolean.push(o.names[0])}return n},G=(i)=>{return i.sort((n,t)=>{return n.length>t.length?-1:1})[0]},M=(i,n)=>{return i.length>=n?i:`${i}${" ".repeat(n-i.length)}`},an=(i)=>{return i.replace(/([a-z])-([a-z])/g,(n,t,o)=>{return t+o.toUpperCase()})},hn=(i,n,t)=>{let o=0,e=n.length,s=i,c;for(;o<e;++o)c=s[n[o]],s=s[n[o]]=o===e-1?t:c!=null?c:!!~n[o+1].indexOf(".")||!(+n[o+1]>-1)?{}:[]},un=(i,n)=>{for(let t of Object.keys(n)){let o=n[t];if(o.shouldTransform){if(i[t]=Array.prototype.concat.call([],i[t]),typeof o.transformFunction==="function")i[t]=i[t].map(o.transformFunction)}}},dn=(i)=>{let n=/([^\\\/]+)$/.exec(i);return n?n[1]:""},W=(i)=>{return i.split(".").map((n,t)=>{return t===0?an(n):n}).join(".")};class w extends Error{constructor(i){super(i);if(this.name=this.constructor.name,typeof Error.captureStackTrace==="function")Error.captureStackTrace(this,this.constructor);else this.stack=new Error(i).stack}}class Y{constructor(i,n,t){if(this.rawName=i,this.description=n,this.config=Object.assign({},t),i=i.replace(/\.\*/g,""),this.negated=!1,this.names=H(i).split(",").map((o)=>{let e=o.trim().replace(/^-{1,2}/,"");if(e.startsWith("no-"))this.negated=!0,e=e.replace(/^no-/,"");return W(e)}).sort((o,e)=>o.length>e.length?1:-1),this.name=this.names[this.names.length-1],this.negated&&this.config.default==null)this.config.default=!0;if(i.includes("<"))this.required=!0;else if(i.includes("["))this.required=!1;else this.isBoolean=!0}}var bn=process.argv,fn=`${process.platform}-${process.arch} node-${process.version}`;class L{constructor(i,n,t={},o){this.rawName=i,this.description=n,this.config=t,this.cli=o,this.options=[],this.aliasNames=[],this.name=H(i),this.args=cn(i),this.examples=[]}usage(i){return this.usageText=i,this}allowUnknownOptions(){return this.config.allowUnknownOptions=!0,this}ignoreOptionDefaultValue(){return this.config.ignoreOptionDefaultValue=!0,this}version(i,n="-v, --version"){return this.versionNumber=i,this.option(n,"Display version number"),this}example(i){return this.examples.push(i),this}option(i,n,t){let o=new Y(i,n,t);return this.options.push(o),this}alias(i){return this.aliasNames.push(i),this}action(i){return this.commandAction=i,this}isMatched(i){return this.name===i||this.aliasNames.includes(i)}get isDefaultCommand(){return this.name===""||this.aliasNames.includes("!")}get isGlobalCommand(){return this instanceof V}hasOption(i){return i=i.split(".")[0],this.options.find((n)=>{return n.names.includes(i)})}outputHelp(){let{name:i,commands:n}=this.cli,{versionNumber:t,options:o,helpCallback:e}=this.cli.globalCommand,s=[{body:`${i}${t?`/${t}`:""}`}];if(s.push({title:"Usage",body:`  $ ${i} ${this.usageText||this.rawName}`}),(this.isGlobalCommand||this.isDefaultCommand)&&n.length>0){let r=G(n.map((m)=>m.rawName));s.push({title:"Commands",body:n.map((m)=>{return`  ${M(m.rawName,r.length)}  ${m.description}`}).join(`
`)}),s.push({title:"For more info, run any command with the `--help` flag",body:n.map((m)=>`  $ ${i}${m.name===""?"":` ${m.name}`} --help`).join(`
`)})}let l=this.isGlobalCommand?o:[...this.options,...o||[]];if(!this.isGlobalCommand&&!this.isDefaultCommand)l=l.filter((r)=>r.name!=="version");if(l.length>0){let r=G(l.map((m)=>m.rawName));s.push({title:"Options",body:l.map((m)=>{return`  ${M(m.rawName,r.length)}  ${m.description} ${m.config.default===void 0?"":`(default: ${m.config.default})`}`}).join(`
`)})}if(this.examples.length>0)s.push({title:"Examples",body:this.examples.map((r)=>{if(typeof r==="function")return r(i);return r}).join(`
`)});if(e)s=e(s)||s;console.log(s.map((r)=>{return r.title?`${r.title}:
${r.body}`:r.body}).join(`

`))}outputVersion(){let{name:i}=this.cli,{versionNumber:n}=this.cli.globalCommand;if(n)console.log(`${i}/${n} ${fn}`)}checkRequiredArgs(){let i=this.args.filter((n)=>n.required).length;if(this.cli.args.length<i)throw new w(`missing required args for command \`${this.rawName}\``)}checkUnknownOptions(){let{options:i,globalCommand:n}=this.cli;if(!this.config.allowUnknownOptions){for(let t of Object.keys(i))if(t!=="--"&&!this.hasOption(t)&&!n.hasOption(t))throw new w(`Unknown option \`${t.length>1?`--${t}`:`-${t}`}\``)}}checkOptionValue(){let{options:i,globalCommand:n}=this.cli,t=[...n.options,...this.options];for(let o of t){let e=i[o.name.split(".")[0]];if(o.required){let s=t.some((c)=>c.negated&&c.names.includes(o.name));if(e===!0||e===!1&&!s)throw new w(`option \`${o.rawName}\` value is missing`)}}}}class V extends L{constructor(i){super("@@global@@","",{},i)}}var y=Object.assign;class z extends sn{constructor(i=""){super();this.name=i,this.commands=[],this.rawArgs=[],this.args=[],this.options={},this.globalCommand=new V(this),this.globalCommand.usage("<command> [options]")}usage(i){return this.globalCommand.usage(i),this}command(i,n,t){let o=new L(i,n||"",t,this);return o.globalCommand=this.globalCommand,this.commands.push(o),o}option(i,n,t){return this.globalCommand.option(i,n,t),this}help(i){return this.globalCommand.option("-h, --help","Display this message"),this.globalCommand.helpCallback=i,this.showHelpOnExit=!0,this}version(i,n="-v, --version"){return this.globalCommand.version(i,n),this.showVersionOnExit=!0,this}example(i){return this.globalCommand.example(i),this}outputHelp(){if(this.matchedCommand)this.matchedCommand.outputHelp();else this.globalCommand.outputHelp()}outputVersion(){this.globalCommand.outputVersion()}setParsedInfo({args:i,options:n},t,o){if(this.args=i,this.options=n,t)this.matchedCommand=t;if(o)this.matchedCommandName=o;return this}unsetMatchedCommand(){this.matchedCommand=void 0,this.matchedCommandName=void 0}parse(i=bn,{run:n=!0}={}){if(this.rawArgs=i,!this.name)this.name=i[1]?dn(i[1]):"cli";let t=!0;for(let e of this.commands){let s=this.mri(i.slice(2),e),c=s.args[0];if(e.isMatched(c)){t=!1;let l=y(y({},s),{args:s.args.slice(1)});this.setParsedInfo(l,e,c),this.emit(`command:${c}`,e)}}if(t){for(let e of this.commands)if(e.name===""){t=!1;let s=this.mri(i.slice(2),e);this.setParsedInfo(s,e),this.emit("command:!",e)}}if(t){let e=this.mri(i.slice(2));this.setParsedInfo(e)}if(this.options.help&&this.showHelpOnExit)this.outputHelp(),n=!1,this.unsetMatchedCommand();if(this.options.version&&this.showVersionOnExit&&this.matchedCommandName==null)this.outputVersion(),n=!1,this.unsetMatchedCommand();let o={args:this.args,options:this.options};if(n)this.runMatchedCommand();if(!this.matchedCommand&&this.args[0])this.emit("command:*");return o}mri(i,n){let t=[...this.globalCommand.options,...n?n.options:[]],o=ln(t),e=[],s=i.indexOf("--");if(s>-1)e=i.slice(s+1),i=i.slice(0,s);let c=mn(i,o);c=Object.keys(c).reduce((h,b)=>{return y(y({},h),{[W(b)]:c[b]})},{_:[]});let l=c._,r={"--":e},m=n&&n.config.ignoreOptionDefaultValue?n.config.ignoreOptionDefaultValue:this.globalCommand.config.ignoreOptionDefaultValue,u=Object.create(null);for(let h of t){if(!m&&h.config.default!==void 0)for(let b of h.names)r[b]=h.config.default;if(Array.isArray(h.config.type)){if(u[h.name]===void 0)u[h.name]=Object.create(null),u[h.name].shouldTransform=!0,u[h.name].transformFunction=h.config.type[0]}}for(let h of Object.keys(c))if(h!=="_"){let b=h.split(".");hn(r,b,c[h]),un(r,u)}return{args:l,options:r}}runMatchedCommand(){let{args:i,options:n,matchedCommand:t}=this;if(!t||!t.commandAction)return;t.checkUnknownOptions(),t.checkOptionValue(),t.checkRequiredArgs();let o=[];return t.args.forEach((e,s)=>{if(e.variadic)o.push(i.slice(s));else o.push(i[s])}),o.push(n),t.commandAction.apply(this,o)}}var Q=(i="")=>new z(i);var B=j(R(),1);var C=j(R(),1);import*as g from"fs";import*as D from"path";import*as p from"path";var f={paths:{projectRoot:"../../..",claude:".claude",github:".github",codex:".codex"},targets:[{name:"copilot",displayName:"Copilot",icon:"\uD83D\uDCE6",tasks:[{type:"symlink",name:"copilot-instructions.md",description:"copilot-instructions.md",icon:"\uD83D\uDCDD",target:"../CLAUDE.md",location:"github"},{type:"fileLinks",name:"instructions",description:"instructions/",icon:"\uD83D\uDCC2",source:"claude/rules",target:"github/instructions",suffix:".instructions"},{type:"fileLinks",name:"agents",description:"agents/",icon:"\uD83E\uDD16",source:"claude/agents",target:"github/agents",suffix:".agent"},{type:"skillLinks",name:"skills",description:"skills/",icon:"\u26A1",source:"claude/skills",target:"github/skills"}]},{name:"codex",displayName:"Codex",icon:"\uD83D\uDCE6",tasks:[{type:"fileLinks",name:"commands",description:"commands/",icon:"\uD83D\uDCC2",source:"claude/commands",target:"codex/commands",suffix:""},{type:"fileLinks",name:"rules",description:"rules/",icon:"\uD83D\uDCCB",source:"claude/rules",target:"codex/rules",suffix:""},{type:"fileLinks",name:"agents",description:"agents/",icon:"\uD83E\uDD16",source:"claude/agents",target:"codex/agents",suffix:""},{type:"skillLinks",name:"skills",description:"skills/",icon:"\u26A1",source:"claude/skills",target:"codex/skills"}]}],messageKeys:{start:"start",targetStart:"targetStart",taskStart:"taskStart",summaryTitle:"summaryTitle",summaryItem:"summaryItem",complete:"complete"}};var X={start:"\uD83D\uDD17 AI\u8A2D\u5B9A\u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF\u306E\u7D71\u4E00\u69CB\u7BC9\u3092\u958B\u59CB...",targetStart:"{icon} [{name}] \u8A2D\u5B9A\u3092\u69CB\u7BC9\u4E2D...",taskStart:"  {icon} {description}\u3092\u69CB\u7BC9\u4E2D...",summaryTitle:"\uD83D\uDCCA [{name}] \u4F5C\u6210\u3055\u308C\u305F\u30EA\u30F3\u30AF\uFF1A",summaryItem:"   {description} ({count}\u30D5\u30A1\u30A4\u30EB)",complete:"\u2705 \u5B8C\u4E86\uFF01"};var __dirname="/Users/hibi-keita/Repository/github.com/ageha734/portfolio/scripts/symlinks/lib";function yn(i){let n={};for(let[t,o]of Object.entries(i))n[t]=X[o];return n}function Z(){let i=p.resolve(__dirname,f.paths.projectRoot),n={projectRoot:i,claude:p.join(i,f.paths.claude),github:p.join(i,f.paths.github),codex:p.join(i,f.paths.codex)},t=yn(f.messageKeys);return{paths:f.paths,targets:f.targets,messageKeys:f.messageKeys,resolvedPaths:n,messages:t}}function x(i,n){let t=i.split("/"),o=t[0];if(!o)throw new Error("Empty path template");let e=n[o];if(!e)throw new Error(`Unknown path prefix: ${o}`);return p.join(e,...t.slice(1))}function O(i,n){return i.replaceAll(/\{(\w+)\}/g,(t,o)=>String(n[o]??""))}import*as a from"fs";import*as d from"path";async function F(i,n,t){if(a.existsSync(n)&&a.lstatSync(n).isSymbolicLink())a.unlinkSync(n);a.mkdirSync(n,{recursive:!0});let o=a.readdirSync(n).filter((s)=>s.endsWith(".md"));for(let s of o)a.unlinkSync(d.join(n,s));let e=a.readdirSync(i).filter((s)=>s.endsWith(".md")&&a.statSync(d.join(i,s)).isFile());for(let s of e){let c=d.basename(s,".md"),l=d.join(i,s),r=d.relative(n,l),m=d.join(n,`${c}${t}.md`);a.symlinkSync(r,m)}}async function v(i,n){if(a.existsSync(n)&&a.lstatSync(n).isSymbolicLink())a.unlinkSync(n);a.mkdirSync(n,{recursive:!0});let t=a.readdirSync(n);for(let e of t){let s=d.join(n,e);if(a.lstatSync(s).isDirectory())a.rmSync(s,{recursive:!0,force:!0});else if(e.endsWith(".md"))a.unlinkSync(s)}let o=a.readdirSync(i).filter((e)=>a.statSync(d.join(i,e)).isDirectory());for(let e of o){let s=d.join(i,e,"SKILL.md");if(a.existsSync(s)){let c=d.join(n,e);a.mkdirSync(c,{recursive:!0});let l=d.relative(c,s),r=d.join(c,"SKILL.md");a.symlinkSync(l,r)}}}function S(i,n){if(!a.existsSync(i))return 0;let t=0,o=(e)=>{let s=a.readdirSync(e);for(let c of s){let l=d.join(e,c);if(a.lstatSync(l).isDirectory())o(l);else if(n==="SKILL.md"?c==="SKILL.md":c.match(new RegExp(n.replace(/\*/g,".*"))))t++}};return o(i),t}async function wn(i,n,t){switch(i.type){case"symlink":{let o=x(i.location||n,t),e=D.join(o,i.name);if(g.existsSync(e))g.unlinkSync(e);g.symlinkSync(i.target,e);break}case"fileLinks":{let o=x(i.source,t),e=x(i.target,t);await F(o,e,i.suffix||"");break}case"skillLinks":{let o=x(i.source,t),e=x(i.target,t);await v(o,e);break}}}function $n(i,n,t){if(i.type==="symlink")return;let o=x(i.target,n),e;if(i.type==="skillLinks")e="SKILL.md";else if(i.suffix)e=`*${i.suffix}.md`;else e="*.md";let s=S(o,e);console.log(O(t,{description:i.description,count:s}))}async function An(i,n,t){console.log(C.default.blue(O(t.targetStart,{icon:i.icon,name:i.displayName})));for(let o of i.tasks)console.log(O(t.taskStart,{icon:o.icon,description:o.description})),await wn(o,i.name,n);console.log("")}function Bn(i,n,t){console.log(C.default.green(O(t.summaryTitle,{name:i.displayName})));for(let o of i.tasks)$n(o,n,t.summaryItem);console.log("")}async function k(){let i=Z(),{resolvedPaths:n,messages:t,targets:o}=i;console.log(C.default.cyan(t.start)),console.log("");for(let e of o)await An(e,n,t);for(let e of o)Bn(e,n,t);console.log(C.default.green(t.complete))}var E=Q("symlinks");E.command("[...args]","AI\u8A2D\u5B9A\u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF\u306E\u7D71\u4E00\u69CB\u7BC9").action(async()=>{try{console.log(B.default.cyan(`\uD83D\uDD17 AI\u8A2D\u5B9A\u30B7\u30F3\u30DC\u30EA\u30C3\u30AF\u30EA\u30F3\u30AF\u306E\u7D71\u4E00\u69CB\u7BC9\u3092\u958B\u59CB...
`)),await k(),console.log(B.default.green(`
\u2705 \u5B8C\u4E86\uFF01`))}catch(i){console.error(B.default.red("\u274C \u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F:"),i),process.exit(1)}});E.help();E.version("1.0.0");E.parse();
