# @portfolio/scripts-changeset

日本語対応のchangeset作成ツール

## 概要

`@changesets/cli`を日本語化したカスタムスクリプトです。インタラクティブな質問形式で、簡単にchangesetを作成できます。

## 機能

- 📝 **日本語インターフェース**: すべてのプロンプトが日本語
- 🎯 **自動パッケージ検出**: 変更されたファイルから影響を受けるパッケージを自動検出
- 📋 **テンプレート選択**: よく使うサマリーをテンプレートから選択可能
- ✅ **自動コミット**: changesetファイル作成後に自動でgit commit
- 🔍 **確認ステップ**: 作成前に内容を確認
- 🔧 **設定の自動検出**: パッケージスコープとchangesetディレクトリを自動検出（ハードコーディング不要）

## 使い方

```bash
# ルートディレクトリで実行
bun run changeset

# または直接実行
changeset-jp
```

## インタラクティブフロー

1. **パッケージ選択**: 変更されたパッケージから選択（複数選択可）
2. **バージョンタイプ選択**: patch/minor/major から選択
3. **カテゴリ選択**: feat/fix/docs等の13種類から選択
4. **サマリー入力**: テンプレートから選択、またはカスタム入力
5. **確認**: 内容を確認して作成

## バージョンタイプ

| タイプ | 説明 |
| ------ | ---- |
| `patch` | バグ修正、ドキュメント更新 |
| `minor` | 新機能追加（後方互換性あり） |
| `major` | 破壊的変更 |

## 変更カテゴリ

| カテゴリ | 説明 |
| -------- | ---- |
| `feat` | 新機能の追加 |
| `fix` | バグの修正 |
| `docs` | ドキュメントのみの変更 |
| `style` | コードの動作に影響しない変更 |
| `refactor` | コードのリファクタリング |
| `perf` | パフォーマンス改善 |
| `test` | テストの追加や修正 |
| `build` | ビルドシステムの変更 |
| `ci` | CI設定の変更 |
| `chore` | その他の変更 |
| `revert` | 以前のコミットの取り消し |
| `improvement` | 既存機能の改善 |
| `security` | セキュリティ関連の修正 |

## サマリーテンプレート

よく使うサマリーはテンプレートから選択できます：

- 新機能を追加
- バグを修正
- ドキュメントを更新
- パフォーマンスを改善
- 依存関係を更新
- リファクタリングを実施
- セキュリティを強化
- テストを追加
- ビルド設定を変更
- CI設定を更新

## 出力例

作成されるchangesetファイル（`.changeset/happy-trees-grow.md`）:

```markdown
---
"@portfolio/api": minor
"@portfolio/db": minor
---

feat: 新機能を追加
```

## 設定の自動検出

このツールは以下の設定を自動検出するため、ハードコーディングは不要です：

### パッケージスコープ

- リポジトリ内のpackage.jsonを探索し、最初に見つかったスコープ付きパッケージ（例: `@portfolio/xxx`）からスコープを抽出
- スコープが検出された場合、そのスコープのパッケージのみを対象とします
- スコープが検出されない場合は、すべてのパッケージを対象とします

### Changesetディレクトリ

- `.changeset/config.json`の存在を確認
- 存在する場合は`.changeset`ディレクトリを使用
- カスタムディレクトリが必要な場合は、config.jsonで設定可能

## 汎用性

このスクリプトは特定のプロジェクト構成に依存しないように設計されています：

- ✅ パッケージスコープを自動検出（`@portfolio/`以外でも動作）
- ✅ Changesetディレクトリを自動検出
- ✅ ワークスペース構成を自動解析
- ✅ 他のMonorepoプロジェクトでも使用可能

## 参照

- [Changesets](https://github.com/changesets/changesets)
- [Git Commitガイド](../../docs/development/git-commit.md)
